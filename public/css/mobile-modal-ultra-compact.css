/**
 * Mobile Modal Ultra Compact
 * Ultra-compact modal layout for very small mobile screens
 * This ensures the add task modal never requires scrolling on mobile devices
 */

/* Ultra-compact layout for very small screens */
@media (max-width: 480px) {
    /* Modal takes almost full screen */
    #editTaskModal .modal-content,
    #addTaskModal .modal-content,
    #addHabitModal .modal-content,
    #editHabitModal .modal-content {
        width: 98% !important;
        margin: 2px auto !important;
        padding: 6px !important;
        max-height: calc(100vh - 4px) !important;
        overflow-y: auto !important;
        border-radius: 4px !important;
    }

    /* Ultra-compact form layout */
    #editTaskModal form,
    #addTaskModal form,
    #addHabitModal form,
    #editHabitModal form {
        gap: 4px !important;
    }

    /* Minimal form groups */
    #editTaskModal .form-group,
    #addTaskModal .form-group,
    #addHabitModal .form-group,
    #editHabitModal .form-group {
        margin-bottom: 3px !important;
    }

    /* Ultra-compact labels */
    #editTaskModal .form-label,
    #addTaskModal .form-label,
    #addHabitModal .form-label,
    #editHabitModal .form-label {
        font-size: 0.75rem !important;
        margin-bottom: 1px !important;
        font-weight: 500 !important;
        line-height: 1.1 !important;
    }

    /* Ultra-compact inputs */
    #editTaskModal input,
    #editTaskModal textarea,
    #editTaskModal select,
    #addTaskModal input,
    #addTaskModal textarea,
    #addTaskModal select,
    #addHabitModal input,
    #addHabitModal textarea,
    #addHabitModal select,
    #editHabitModal input,
    #editHabitModal textarea,
    #editHabitModal select {
        padding: 3px 4px !important;
        font-size: 0.75rem !important;
        min-height: 28px !important;
        border-radius: 3px !important;
    }

    /* Ultra-compact textarea */
    #editTaskModal textarea,
    #addTaskModal textarea,
    #addHabitModal textarea,
    #editHabitModal textarea {
        min-height: 45px !important;
        max-height: 60px !important;
        resize: none !important;
    }

    /* Ultra-compact form rows */
    #editTaskModal .form-row,
    #addTaskModal .form-row {
        gap: 4px !important;
        margin-bottom: 3px !important;
    }

    /* Ultra-compact reminder checkboxes */
    #editTaskModal .reminder-checkboxes,
    #addTaskModal .reminder-checkboxes {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 2px !important;
        margin-top: 2px !important;
    }

    #editTaskModal .form-check,
    #addTaskModal .form-check {
        margin-bottom: 2px !important;
        font-size: 0.7rem !important;
        line-height: 1.1 !important;
    }

    #editTaskModal .form-check-input,
    #addTaskModal .form-check-input {
        width: 14px !important;
        height: 14px !important;
        margin-right: 4px !important;
    }

    #editTaskModal .form-check-label,
    #addTaskModal .form-check-label {
        font-size: 0.7rem !important;
        line-height: 1.1 !important;
    }

    /* Ultra-compact subtasks section */
    #editTaskModal .subtasks-header,
    #addTaskModal .subtasks-header {
        margin-bottom: 2px !important;
        font-size: 0.75rem !important;
    }

    #editTaskModal .subtasks-list,
    #addTaskModal .subtasks-list {
        max-height: 80px !important;
        overflow-y: auto !important;
    }

    /* Ultra-compact subtask items */
    .subtask-item {
        padding: 2px 4px !important;
        margin-bottom: 1px !important;
        font-size: 0.7rem !important;
        min-height: 24px !important;
    }

    /* Ultra-compact buttons */
    #editTaskModal button[type="submit"],
    #addTaskModal button[type="submit"],
    #addHabitModal button[type="submit"],
    #editHabitModal button[type="submit"],
    #addTaskModal .btn.btn--primary,
    #addHabitModal .btn.btn--primary,
    #editHabitModal .btn.btn--primary {
        padding: 6px 8px !important;
        font-size: 0.75rem !important;
        margin-top: 4px !important;
        min-height: 32px !important;
    }

    /* Ultra-compact modal header */
    #editTaskModal .modal-header,
    #addTaskModal .modal-header,
    #addHabitModal .modal-header,
    #editHabitModal .modal-header {
        padding-bottom: 3px !important;
        margin-bottom: 4px !important;
        border-bottom: 1px solid #333 !important;
    }

    #editTaskModal .modal-header h2,
    #addTaskModal .modal-header h2,
    #addHabitModal .modal-header h2,
    #editHabitModal .modal-header h2 {
        font-size: 1rem !important;
        margin: 0 !important;
        line-height: 1.2 !important;
    }

    /* Ultra-compact close button */
    #editTaskModal .close-button,
    #addTaskModal .close-button,
    #addHabitModal .close-button,
    #editHabitModal .close-button {
        top: 4px !important;
        right: 4px !important;
        font-size: 14px !important;
        width: 20px !important;
        height: 20px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }

    /* Ultra-compact toggle controls */
    #addTaskModal .toggle-container {
        margin-bottom: 3px !important;
    }

    #addTaskModal .toggle-label {
        font-size: 0.7rem !important;
        margin-left: 4px !important;
    }

    #addTaskModal .toggle-switch {
        width: 28px !important;
        height: 14px !important;
    }

    #addTaskModal .toggle-slider {
        border-radius: 14px !important;
    }

    #addTaskModal .toggle-slider:before {
        height: 10px !important;
        width: 10px !important;
        left: 2px !important;
        bottom: 2px !important;
    }

    #addTaskModal input:checked + .toggle-slider:before {
        transform: translateX(14px) !important;
    }

    /* Ultra-compact input groups */
    #editTaskModal .input-group-text,
    #addTaskModal .input-group-text {
        padding: 3px 4px !important;
        font-size: 0.7rem !important;
        min-height: 28px !important;
    }

    /* Ultra-compact status messages */
    #editTaskModal .status,
    #addTaskModal .status,
    #addHabitModal .status,
    #editHabitModal .status {
        margin-top: 4px !important;
        padding: 4px !important;
        font-size: 0.7rem !important;
        border-radius: 3px !important;
    }

    /* Ultra-compact button container */
    .button-container {
        margin-top: 4px !important;
        margin-bottom: 0 !important;
    }

    /* Hide "no subtasks" message to save space */
    .no-subtasks-message {
        display: none !important;
    }

    /* Ultra-compact modal controls */
    #addTaskModal .modal-controls {
        margin-bottom: 3px !important;
    }

    /* Optimize custom reminder group */
    #customReminderGroup,
    #editCustomReminderGroup {
        margin-top: 2px !important;
        margin-bottom: 2px !important;
    }

    /* Optimize recurrence interval group */
    #recurrenceIntervalGroup,
    #editRecurrenceIntervalGroup {
        margin-top: 2px !important;
    }

    /* Ultra-compact subtask buttons */
    #addTaskModal #addSubtaskBtn,
    #editTaskModal #editAddSubtaskBtn {
        padding: 1px 3px !important;
        font-size: 0.65rem !important;
        margin-left: 2px !important;
        min-height: 20px !important;
        border-radius: 2px !important;
    }
}

/* Extra optimizations for landscape orientation on small screens */
@media (max-width: 768px) and (max-height: 500px) {
    #editTaskModal .modal-content,
    #addTaskModal .modal-content,
    #addHabitModal .modal-content,
    #editHabitModal .modal-content {
        max-height: calc(100vh - 10px) !important;
        overflow-y: auto !important;
    }

    /* Even more compact in landscape */
    #editTaskModal .form-group,
    #addTaskModal .form-group,
    #addHabitModal .form-group,
    #editHabitModal .form-group {
        margin-bottom: 2px !important;
    }

    #editTaskModal textarea,
    #addTaskModal textarea {
        min-height: 35px !important;
        max-height: 45px !important;
    }

    #editTaskModal .subtasks-list,
    #addTaskModal .subtasks-list {
        max-height: 60px !important;
    }
}
